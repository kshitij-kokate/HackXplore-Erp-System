{% extends "dashboard_layout.html" %}

{% block title %}My Analytics - CampusIQ{% endblock %}

{% block content %}
<!-- Analytics Section -->
<div class="section-title mb-4">
    <h2>My Academic Analytics</h2>
</div>

<div class="d-flex justify-content-end mb-4">
    <button class="btn btn-outline-secondary me-2">
        <i class="fas fa-download"></i> Export Report
    </button>
    <button class="btn btn-primary">
        <i class="fas fa-clock"></i> Historical Data
    </button>
</div>

<!-- Performance Metrics -->
<div class="row mb-4">
    <div class="col-md-3 mb-3 mb-md-0">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="rounded-circle bg-success bg-opacity-10 p-3 d-inline-block mb-3">
                    <i class="fas fa-chart-line text-success fs-3"></i>
                </div>
                <h5>GPA</h5>
                <h2 class="mb-0">3.8</h2>
                <div class="d-flex align-items-center justify-content-center mt-2">
                    <i class="fas fa-arrow-up text-success me-1"></i>
                    <small class="text-success">0.2 vs last semester</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3 mb-md-0">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="rounded-circle bg-primary bg-opacity-10 p-3 d-inline-block mb-3">
                    <i class="fas fa-graduation-cap text-primary fs-3"></i>
                </div>
                <h5>Completion Rate</h5>
                <h2 class="mb-0">92%</h2>
                <div class="d-flex align-items-center justify-content-center mt-2">
                    <i class="fas fa-arrow-up text-success me-1"></i>
                    <small class="text-success">4% vs last semester</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 mb-3 mb-md-0">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="rounded-circle bg-info bg-opacity-10 p-3 d-inline-block mb-3">
                    <i class="fas fa-clipboard-check text-info fs-3"></i>
                </div>
                <h5>Attendance</h5>
                <h2 class="mb-0">95%</h2>
                <div class="d-flex align-items-center justify-content-center mt-2">
                    <i class="fas fa-arrow-up text-success me-1"></i>
                    <small class="text-success">2% vs last semester</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card h-100">
            <div class="card-body text-center">
                <div class="rounded-circle bg-warning bg-opacity-10 p-3 d-inline-block mb-3">
                    <i class="fas fa-tasks text-warning fs-3"></i>
                </div>
                <h5>Assignments Completed</h5>
                <h2 class="mb-0">85%</h2>
                <div class="d-flex align-items-center justify-content-center mt-2">
                    <i class="fas fa-arrow-up text-success me-1"></i>
                    <small class="text-success">5% vs last semester</small>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Course Performance -->
    <div class="row mb-4">
        <div class="col-md-8 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Course Performance</h5>
                    <div class="btn-group" role="group">
                        <button type="button" class="btn btn-sm btn-outline-secondary active">Semester</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Year</button>
                        <button type="button" class="btn btn-sm btn-outline-secondary">All</button>
                    </div>
                </div>
                <div class="card-body">
                    <canvas id="coursePerformanceChart" height="300"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Grade Distribution</h5>
                </div>
                <div class="card-body">
                    <canvas id="gradeDistributionChart" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Academic Progress and Time Management -->
    <div class="row mb-4">
        <div class="col-md-6 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Academic Progress</h5>
                </div>
                <div class="card-body">
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Computer Science (Major)</span>
                            <span>65% Complete</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-success" style="width: 65%"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Required Courses</span>
                            <span>72% Complete</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-primary" style="width: 72%"></div>
                        </div>
                    </div>
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Elective Courses</span>
                            <span>45% Complete</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-info" style="width: 45%"></div>
                        </div>
                    </div>
                    <div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>General Education</span>
                            <span>80% Complete</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar bg-warning" style="width: 80%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Time Management</h5>
                </div>
                <div class="card-body">
                    <canvas id="timeManagementChart" height="300"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Skills Assessment and AI Learning Insights -->
    <div class="row mb-4">
        <div class="col-md-6 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">Skills Assessment</h5>
                </div>
                <div class="card-body">
                    <canvas id="skillsRadarChart" height="300"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <h5 class="mb-0">AI Learning Insights</h5>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item border-bottom p-3">
                            <div class="d-flex">
                                <div class="insight-icon bg-success bg-opacity-10 text-success rounded p-2 text-center me-3" style="min-width: 40px;">
                                    <i class="fas fa-arrow-up"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1">Strong Performance in Programming</h6>
                                    <p class="small text-muted mb-0">You're consistently scoring in the top 10% in programming assignments across all courses. Consider pursuing advanced topics in software development.</p>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item border-bottom p-3">
                            <div class="d-flex">
                                <div class="insight-icon bg-warning bg-opacity-10 text-warning rounded p-2 text-center me-3" style="min-width: 40px;">
                                    <i class="fas fa-exclamation"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1">Theory Concepts Need Attention</h6>
                                    <p class="small text-muted mb-0">Your performance in theoretical concepts is 15% lower than practical implementation. Consider allocating more study time to theoretical foundations.</p>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item border-bottom p-3">
                            <div class="d-flex">
                                <div class="insight-icon bg-info bg-opacity-10 text-info rounded p-2 text-center me-3" style="min-width: 40px;">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1">Learning Pattern Detected</h6>
                                    <p class="small text-muted mb-0">You perform best on assignments started at least 5 days before the deadline. Try to maintain this habit for all future assignments.</p>
                                </div>
                            </div>
                        </div>
                        <div class="list-group-item border-bottom p-3">
                            <div class="d-flex">
                                <div class="insight-icon bg-primary bg-opacity-10 text-primary rounded p-2 text-center me-3" style="min-width: 40px;">
                                    <i class="fas fa-chart-pie"></i>
                                </div>
                                <div>
                                    <h6 class="mb-1">Group Work Effectiveness</h6>
                                    <p class="small text-muted mb-0">Your performance improves by approximately 12% when working in collaborative settings. Consider joining more study groups.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Learning Recommendations -->
    <div class="card mb-4">
        <div class="card-header">
            <h5 class="mb-0">Learning Recommendations</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3 mb-md-0">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3">
                                    <i class="fas fa-book text-primary"></i>
                                </div>
                                <h5 class="mb-0">Suggested Resources</h5>
                            </div>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <a href="#" class="text-decoration-none">
                                        <i class="fas fa-external-link-alt me-2 text-muted"></i>
                                        Advanced Algorithms in Practice
                                    </a>
                                </li>
                                <li class="mb-2">
                                    <a href="#" class="text-decoration-none">
                                        <i class="fas fa-video me-2 text-muted"></i>
                                        Database Optimization Techniques
                                    </a>
                                </li>
                                <li class="mb-2">
                                    <a href="#" class="text-decoration-none">
                                        <i class="fas fa-file-pdf me-2 text-muted"></i>
                                        Neural Networks and Deep Learning
                                    </a>
                                </li>
                                <li>
                                    <a href="#" class="text-decoration-none">
                                        <i class="fas fa-file-code me-2 text-muted"></i>
                                        Modern Web Development with React
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3 mb-md-0">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="rounded-circle bg-success bg-opacity-10 p-3 me-3">
                                    <i class="fas fa-check text-success"></i>
                                </div>
                                <h5 class="mb-0">Academic Strengths</h5>
                            </div>
                            <ul class="list-unstyled">
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-success me-2">A+</span>
                                    Code Optimization Techniques
                                </li>
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-success me-2">A</span>
                                    Database Design
                                </li>
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-success me-2">A</span>
                                    Problem-Solving
                                </li>
                                <li class="d-flex align-items-center">
                                    <span class="badge bg-success me-2">A-</span>
                                    Web Development
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-3">
                                <div class="rounded-circle bg-warning bg-opacity-10 p-3 me-3">
                                    <i class="fas fa-flag text-warning"></i>
                                </div>
                                <h5 class="mb-0">Areas for Improvement</h5>
                            </div>
                            <ul class="list-unstyled">
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-warning me-2">B-</span>
                                    Theoretical Computer Science
                                </li>
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-warning me-2">B</span>
                                    Network Security Principles
                                </li>
                                <li class="mb-2 d-flex align-items-center">
                                    <span class="badge bg-warning me-2">B</span>
                                    Advanced Mathematics
                                </li>
                                <li class="d-flex align-items-center">
                                    <span class="badge bg-warning me-2">B+</span>
                                    Research Methodology
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Course Performance Chart
        const coursePerformanceCtx = document.getElementById('coursePerformanceChart').getContext('2d');
        const coursePerformanceChart = new Chart(coursePerformanceCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [
                    {
                        label: 'Data Structures',
                        data: [85, 88, 92, 90, 94, 92],
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Database Management',
                        data: [78, 82, 84, 90, 88, 85],
                        borderColor: 'rgb(54, 162, 235)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'AI Fundamentals',
                        data: [65, 70, 74, 78, 80, 82],
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Web Development',
                        data: [90, 92, 94, 95, 94, 96],
                        borderColor: 'rgb(255, 159, 64)',
                        backgroundColor: 'rgba(255, 159, 64, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Cybersecurity',
                        data: [75, 78, 82, 80, 84, 82],
                        borderColor: 'rgb(153, 102, 255)',
                        backgroundColor: 'rgba(153, 102, 255, 0.1)',
                        tension: 0.3,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });

        // Grade Distribution Chart
        const gradeDistributionCtx = document.getElementById('gradeDistributionChart').getContext('2d');
        const gradeDistributionChart = new Chart(gradeDistributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['A', 'B', 'C', 'D', 'F'],
                datasets: [
                    {
                        data: [60, 30, 10, 0, 0],
                        backgroundColor: [
                            'rgba(75, 192, 192, 0.8)',
                            'rgba(54, 162, 235, 0.8)',
                            'rgba(255, 206, 86, 0.8)',
                            'rgba(255, 159, 64, 0.8)',
                            'rgba(255, 99, 132, 0.8)'
                        ],
                        borderColor: [
                            'rgba(75, 192, 192, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(255, 99, 132, 1)'
                        ],
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });

        // Time Management Chart
        const timeManagementCtx = document.getElementById('timeManagementChart').getContext('2d');
        const timeManagementChart = new Chart(timeManagementCtx, {
            type: 'bar',
            data: {
                labels: ['Lectures', 'Study Time', 'Assignments', 'Projects', 'Labs', 'Exams Prep'],
                datasets: [
                    {
                        label: 'Allocated Hours (Weekly)',
                        data: [15, 12, 10, 8, 6, 5],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgb(54, 162, 235)',
                        borderWidth: 1
                    },
                    {
                        label: 'Recommended Hours (Weekly)',
                        data: [15, 15, 10, 10, 6, 8],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgb(255, 99, 132)',
                        borderWidth: 1,
                        type: 'line'
                    }
                ]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    },
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        }
                    }
                }
            }
        });

        // Skills Radar Chart
        const skillsRadarCtx = document.getElementById('skillsRadarChart').getContext('2d');
        const skillsRadarChart = new Chart(skillsRadarCtx, {
            type: 'radar',
            data: {
                labels: [
                    'Programming',
                    'Database Design',
                    'Algorithm Design',
                    'Web Development',
                    'Data Analysis',
                    'AI & ML',
                    'Networking',
                    'Security'
                ],
                datasets: [
                    {
                        label: 'Current Skills',
                        data: [90, 85, 75, 90, 70, 65, 60, 75],
                        backgroundColor: 'rgba(54, 162, 235, 0.2)',
                        borderColor: 'rgb(54, 162, 235)',
                        pointBackgroundColor: 'rgb(54, 162, 235)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(54, 162, 235)'
                    },
                    {
                        label: 'Industry Average',
                        data: [70, 65, 70, 65, 75, 70, 75, 80],
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderColor: 'rgb(255, 99, 132)',
                        pointBackgroundColor: 'rgb(255, 99, 132)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(255, 99, 132)'
                    }
                ]
            },
            options: {
                elements: {
                    line: {
                        borderWidth: 3
                    }
                },
                scales: {
                    r: {
                        angleLines: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        pointLabels: {
                            color: 'rgba(255, 255, 255, 0.7)'
                        },
                        ticks: {
                            backdropColor: 'transparent',
                            color: 'rgba(255, 255, 255, 0.7)'
                        }
                    }
                }
            }
        });
    });
</script>
{% endblock %}